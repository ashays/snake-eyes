(this["webpackJsonpsnake-eyes"]=this["webpackJsonpsnake-eyes"]||[]).push([[0],{26:function(e,t,n){e.exports=n(42)},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=41},42:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(22),r=n.n(i),o=(n(31),n(9)),c=n(10),p=n(12),l=n(11),u=n(14),d=n(5),h=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"Home"),s.a.createElement(u.b,{to:"room/"+this.props.id},"Create Room"))}}]),n}(a.Component),m=n(19),b=n(8),f=n(7),v=n(13);n(37);var g=function(e){var t=Object.entries(e.participants).map((function(t){return s.a.createElement("li",{key:t[0]},e.turn.pId===t[0]&&"\ud83d\udc51",t[1].name,t[1].score)}));return s.a.createElement("ul",null,t)};n(38);var k=function(e){var t="",n=e.chat.map((function(e,n){var a;return e.sender!==t&&(a=s.a.createElement("div",{className:"sender"},e.sender),t=e.sender),s.a.createElement("div",{key:n},a,s.a.createElement("div",{className:"message"},e.message))}));return s.a.createElement("div",{className:"chat"},n)},y=(n(39),["taxi cab","standing ovation","alarm clock","tool","banana peel","flagpole","money","wallet","ballpoint pen","sunburn","wedding ring","spy","baby-sitter","aunt","acne","bib","puzzle piece","pawn","astronaut","tennis shoes","blue jeans","twig","outer space","banister","batteries","doghouse","campsite","plumber","bedbug","throne","tiptoe","log","mute","pogo stick","stoplight","ceiling fan","bedspread","bite","stove","windmill","nightmare","stripe","spring","wristwatch","eat","matchstick","gumball","bobsled","bonnet","flock","sprinkler","living room","laugh","snuggle","sneeze","bud","elf","headache","slam dunk","Internet","saddle","ironing board","bathroom scale","kiss","shopping cart","shipwreck","funny","glide","lamp","candlestick","grandfather","rocket","home movies","seesaw","rollerblades","smog","grill","goblin","coach","claw","cloud","shelf","recycle","glue stick","Christmas carolers","front porch","earache","robot","foil","rib","robe","crumb","paperback","hurdle","rattle","fetch","date","iPod","dance","cello","flute","dock","prize","dollar","puppet","brass","firefighter","huddle","easel","pigpen","bunk bed","bowtie","fiddle","dentist","baseboards","letter opener","photographer","magic","Old Spice","monster"]),O=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={isHost:a.props.id===a.props.match.params.id,connections:{},turn:{},participants:a.props.id?Object(f.a)({},a.props.id,{name:a.props.id,score:0}):{},chat:[]},a.words=y,a.receive=a.receive.bind(Object(v.a)(a)),a.sendChatMessage=a.sendChatMessage.bind(Object(v.a)(a)),a.nextTurn=a.nextTurn.bind(Object(v.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.id&&!this.state.isHost){var t=this.props.peer.connect(this.props.match.params.id);this.setupConnection(t)}else this.state.isHost&&this.props.peer.on("connection",(function(t){e.setupConnection(t)}))}},{key:"componentDidUpdate",value:function(e){if(this.props.id!==e.id&&!this.state.isHost){var t=this.props.peer.connect(this.props.match.params.id);this.setupConnection(t)}}},{key:"setupConnection",value:function(e){var t=this;e.on("open",(function(){t.state.isHost?t.setState((function(t,n){return{connections:Object(b.a)({},t.connections,Object(f.a)({},e.peer,e)),participants:Object(b.a)({},t.participants,Object(f.a)({},e.peer,{name:e.peer,score:0}))}}),(function(){t.send({type:"participants",participants:t.state.participants})})):t.setState((function(t,n){return{connections:Object(b.a)({},t.connections,Object(f.a)({},e.peer,e))}}))})),e.on("error",(function(e){if(console.error(e),t.props.id&&!t.state.isHost){var n=t.props.peer.connect(t.props.match.params.id);t.setupConnection(n)}})),e.on("close",(function(){t.state.isHost&&t.setState((function(t,n){var a=Object(b.a)({},t.connections),s=Object(b.a)({},t.participants);return delete a[e.peer],delete s[e.peer],{connections:a,participants:s}}),(function(){t.send({type:"participants",participants:t.state.participants})}))})),e.on("data",(function(n){t.receive(n,e.peer)}))}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.connections;for(var n in t)t[n].send(e)}},{key:"receive",value:function(e,t){switch(e.type){case"log":console.log(e.message);break;case"chat":this.addToChat(e.message,t);break;case"turn":this.setState({turn:e.turn});break;case"participants":this.setState({participants:e.participants});break;default:console.log("Received ",e)}}},{key:"nextTurn",value:function(){var e=this.words[Math.floor(Math.random()*this.words.length)],t=Object.keys(this.state.participants),n=0;void 0!==this.state.turn.pIndex&&(n=this.state.turn.pIndex+1<t.length?this.state.turn.pIndex+1:0);var a={pId:t[n],pIndex:n,word:e};this.send({type:"turn",turn:a}),this.setState({turn:a})}},{key:"addToChat",value:function(e,t){if(this.state.isHost){if(e===this.state.turn.word&&this.state.turn.pId!==t){var n=Object(b.a)({},this.state.participants);n[this.state.turn.pId].score++,n[t].score++,this.setState({participants:n}),this.send({type:"participants",participants:n}),this.nextTurn()}this.send({type:"chat",message:{message:e,sender:t}}),this.setState((function(n,a){return{chat:[].concat(Object(m.a)(n.chat),[{message:e,sender:t}])}}))}else this.setState((function(t,n){return{chat:[].concat(Object(m.a)(t.chat),[e])}}))}},{key:"sendChatMessage",value:function(e){e.preventDefault();var t=e.target.elements.message.value;this.state.isHost?this.addToChat(t,this.props.id):this.send({type:"chat",message:t}),e.target.elements.message.value=""}},{key:"render",value:function(){return this.state.isHost||this.state.connections[this.props.match.params.id]?s.a.createElement("div",{className:"container"},s.a.createElement(k,{chat:this.state.chat}),s.a.createElement("main",null,s.a.createElement("h1",null,"Room"),s.a.createElement(g,{participants:this.state.participants,turn:this.state.turn}),this.state.isHost&&void 0===this.state.turn.pIndex&&s.a.createElement("button",{type:"button",onClick:this.nextTurn},"Start game!"),this.state.turn.pId===this.props.id&&s.a.createElement("div",{className:"word"},this.state.turn.word)),s.a.createElement("form",{onSubmit:this.sendChatMessage,autoComplete:"off"},s.a.createElement("input",{type:"text",id:"message",name:"message",placeholder:"Enter Message"}),s.a.createElement("input",{type:"submit",value:"Send"}))):s.a.createElement("div",{className:"loader"})}}]),n}(a.Component),E=Object(d.f)(O),j=(n(40),n(25)),w=n.n(j),C=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={id:void 0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new w.a;t.on("open",(function(n){console.log("My peer ID is: "+n),e.setState({id:n,peer:t})}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement(u.a,null,s.a.createElement(d.c,null,s.a.createElement(d.a,{path:"/room/:id"},s.a.createElement(E,{id:this.state.id,peer:this.state.peer})),s.a.createElement(d.a,{path:"/"},s.a.createElement(h,{id:this.state.id}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.6d7e42ea.chunk.js.map